{% import "macros/components.html" as components %}
{% import "macros/icons.html" as icons %}
{% import "macros/forms.html" as forms %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboards - Job Application Portal</title>
    <link rel="stylesheet" href="/css/variables.css" />
    <link rel="stylesheet" href="/css/leaderboard.css">
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/button.css">
    <link rel="stylesheet" href="/css/stepper.css">
    <link rel="stylesheet" href="/css/grid.css">
    <link rel="stylesheet" href="/css/forms.css">
</head>

<body>
    <div class="background-pattern"> 
        <div class="grid-container">
            <div class="leaderboard-container">
                {{ components::stepper(current_step=5) }}
                <div style="display: flex; margin: 16px 0px; justify-content: center;">
                    <div class="leaderboard-content">
                        
                        <div class="page-header">
                            <div style="display: flex; justify-content: space-between;">
                                <h1 class="page-title">Leaderboards</h1>
                                <div class="application-description">{{ leaderboard_data | length }} Applicants</div>
                            </div>
                            <p class="page-description">
                                See how you stack up
                            </p>
                            <div class="job-info">
                                {{ forms::select_input_ref(
                                    name="job",
                                    label="",
                                    options=job_options,
                                    placeholder="No Jobs Available",
                                )}}
                            </div>
                        </div>
                        
                        <div class="search-section">
                            <div class="search-container">
                                <div class="search-text">Search</div>
                                <input type="text" class="search-input" placeholder="Enter a Name">
                            </div>
                        </div>
                        

                        <div class="table-wrapper">
                            <div class="table-header">
                                <div>Name</div>
                                <div>Yay</div>
                                <div>Nay</div>
                                <div>Application Link</div>
                            </div>
                            {% set link_icon_svg = icons::link_icon() %}
                            <div class="table-rows-container">
                                {% if leaderboard_data and leaderboard_data | length > 0 %}
                                    {% for entry in leaderboard_data %}
                                    <div class="table-row">
                                        <div style="padding: 0 16px;">{{ entry.name }}</div>
                                        <div>{{ entry.yay_count }}</div>
                                        <div>{{ entry.nay_count }}</div>
                                        <div style="padding-right: 16px;">
                                            {{ components::button(label="View Application", primary=true, size="small", backIcon=link_icon_svg) }}
                                        </div>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                <div class="no-results">
                                    <h2 style="margin-top: 0px">This Session Hasn't Been Ranked Yet.</h2>
                                    
                                    <div class="countdown-section">
                                        <div class="countdown-label">Event Begins:</div>
                                        <div class="countdown-timer">[ 02:00:000 ]</div>
                                    </div>
                                    
                                    <div class="button-wrapper">
                                        {{ components::button(label="RETURN HOME", 
                                            form="resume-form", 
                                            type="submit", 
                                            primary=true, 
                                            size="big",
                                            extra_attrs='onclick="redirectHomepage()"'
                                        ) }}
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Add keyboard navigation for back button
        document.querySelector('.back-button').addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                history.back();
            }
        });

        function redirectHomepage() {
            window.location.href = "/";
            return
        }

        // Countdown timer functionality
        function updateCountdown() {
            const countdownElement = document.querySelector('.countdown-timer');
            if (countdownElement) {
                const currentTime = countdownElement.textContent;
                // This would normally connect to a real countdown
                // For now, it displays the static time from the screenshot
            }
        }

        // Search functionality
        document.querySelector('.search-input').addEventListener('input', function(e) {
            // This would filter results if there were any leaderboard entries
            console.log('Search:', e.target.value);
        });
    </script>
</body>
</html>